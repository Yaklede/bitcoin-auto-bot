# Docker 컨테이너 로그 로테이션 설정
# EC2에서 /etc/logrotate.d/docker-containers 로 복사하여 사용

/var/lib/docker/containers/*/*.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 0644 root root
    postrotate
        /bin/kill -USR1 $(cat /var/run/docker.pid 2>/dev/null) 2>/dev/null || true
    endscript
}

# 애플리케이션 로그 디렉토리 (볼륨 마운트된 로그)
/home/ubuntu/bitcoin-auto-bot/logs/*.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 0644 ubuntu ubuntu
    copytruncate
}

# Prometheus 데이터 정리 (필요시)
/var/lib/docker/volumes/bitcoin-auto-bot_prometheus_data/_data/wal/* {
    daily
    rotate 3
    compress
    missingok
    notifempty
    maxage 7
}
